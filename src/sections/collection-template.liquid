{% liquid
  assign mobile_grid_item_width = 'grid-cols-' | append: section.settings.mobile_grid
  assign desktop_grid_item_width = 'lg:grid-cols-' | append: section.settings.desktop_grid
  case section.settings.mobile_grid
  when '1'
    assign image_sizes_mobile = '345'
  when '2'
    assign image_sizes_mobile = '162'
  endcase

  if section.settings.filter_type == "vertical"
    render "collection-2", section: section, enable_lazyload: section.settings.enable_lazyload, enable_quick_add_button: section.settings.enable_quick_add_button, image_ratio: section.settings.image_ratio, mobile_grid_item_width: mobile_grid_item_width, desktop_grid_item_width: desktop_grid_item_width, image_sizes_mobile: image_sizes_mobile
  else
    render "collection", section: section, enable_lazyload: section.settings.enable_lazyload, enable_quick_add_button: section.settings.enable_quick_add_button, image_ratio: section.settings.image_ratio, mobile_grid_item_width: mobile_grid_item_width, desktop_grid_item_width: desktop_grid_item_width, image_sizes_mobile: image_sizes_mobile
  endif
%}

{% schema %}
{
  "name": "Collection",
  "settings": [
    {
      "type": "checkbox",
      "id": "enable_infinite",
      "label": "Enable infinite scroll",
      "default": true
    },
    {
      "type": "header",
      "content": "t:sections.collection-template.settings.header__1.content"
    },
    {
      "type": "checkbox",
      "id": "enable_filtering",
      "default": true,
      "label": "t:sections.collection-template.settings.enable_filtering.label",
      "info": "t:sections.collection-template.settings.enable_filtering.info"
    },
    {
      "type": "checkbox",
      "id": "enable_sorting",
      "default": true,
      "label": "t:sections.collection-template.settings.enable_sorting.label"
    },
    {
      "type": "checkbox",
      "id": "enable_lazyload",
      "label": "Enable lazyload",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "enable_quick_add_button",
      "label": "Enable quick add button",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "enable_color_swatches",
      "label": "Enable color swatches",
      "default": true
    },
    {
      "type": "select",
      "id": "filter_type",
      "label": "Filter type",
      "options": [
        {
          "value": "horizontal",
          "label": "t:sections.collection-template.settings.filter_type.option__1.label"
        },
        {
          "value": "vertical",
          "label": "t:sections.collection-template.settings.filter_type.option__2.label"
        }
      ],
      "default": "vertical"
    },
    {
      "type": "range",
      "id": "desktop_grid",
      "label": "Products per row for desktop",
      "min": 1,
      "max": 5,
      "step": 1,
      "default": 4
    },
    {
      "type": "select",
      "id": "mobile_grid",
      "label": "Products per row for mobile",
      "default": "2",
      "options": [
        {
          "value": "1",
          "label": "One product in row"
        },
        {
          "value": "2",
          "label": "Two products in row"
        }
      ]
    },
    {
      "type": "select",
      "id": "image_ratio",
      "label": "Image ratio",
      "default": "",
      "options": [
        {
          "value": "",
          "label": "Adapt to image"
        },
        {
          "value": "product-item--portrait",
          "label": "Portrait"
        },
        {
          "value": "product-item--square",
          "label": "Square"
        }
      ]
    }
  ]
}
{% endschema %}
