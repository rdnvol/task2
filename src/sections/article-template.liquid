{% render 'breadcrumbs' %}

<div class="section section--without-padding-top">
  <div class="container">
    <article>
      {% if article.image.src != blank %}
        <div class="page-hero post__img mb-5 md:mb-4">
          {% liquid
            if section.settings.enable_lazyload
              assign enable_lazyload = true
            else
              assign enable_lazyload = false
            endif
          %}
          {%
            render 'image',
            src: article.image.src,
            m: '360x',
            src_d: article.image.src,
            d: '1440x',
            alt: article.image.alt,
            lazyload: enable_lazyload
          %}
        </div>
      {% endif %}
      <div class="md:flex">
        <div class="md:mx-auto md:w-8/12">
          <header class="post__header mb-3">
            <div class="body-small mb-4 md:mb-3">
              {{ article.published_at | time_tag: format: 'month_day_year' }}
            </div>
            <h1 class="h4 mb-3">{{ article.title }}</h1>
            {% if blog.comments_enabled? %}
              <a
                href="#comments"
                class="body-small mb-3 inline-block"
              >
                {{ 'blogs.comments.with_count' | t: count: article.comments_count }}
              </a>
            {% endif %}
          </header>
          {% if article.content != blank %}
            <div class="rte mb-7">
              {{ article.content }}
            </div>
          {% endif %}
          {% if settings.social_sharing_blog %}
            {% render 'social-sharing', share_title: article.title, share_permalink: article.url, share_image: article.image %}
          {% endif %}
          {% if article.comments_enabled? %}
            <div
              id="comments"
              class="post__discussion"
            >
              <h2 class="h4 mb-3">{{ 'blogs.comments.block_title' | t }}</h2>
              <ul>
                {% for comment in article.comments %}
                  <li>
                    <div class="post__comment rte">
                      <div class="mb-3">
                        <strong>{{ comment.author }}</strong>
                        <div>
                          {{ comment.created_at | time_tag: format: 'month_day_year_time' }}
                        </div>
                      </div>
                      {{ comment.content }}
                    </div>
                  </li>
                {% endfor %}
              </ul>
            </div>
            {% form 'new_comment', article %}
              <h2 class="h4 mb-3">{{ 'blogs.comments.title' | t }}</h2>
              {{ form.errors | default_errors }}
              {% if comment and comment.status and comment.id != blank %}
                <div class="form-success messages-success">
                  {% if blog.moderated? and comment.status != 'published' %}
                    {{ 'blogs.comments.success_moderated' | t }}
                  {% else %}
                    {{ 'blogs.comments.success' | t }}
                  {% endif %}
                </div>
              {% endif %}
              <div class="sm:grid sm:grid-cols-2 sm:gap-x-8">
                <div class="input-holder">
                  <label
                    for="CommentAuthor"
                    class="label-hidden mb-1 inline-block"
                  >
                    {{ 'blogs.comments.name' | t }}
                  </label>
                  <input
                    type="text"
                    name="comment[author]"
                    id="CommentAuthor"
                    class="{% if form.errors contains 'author' %}input-error{% endif %}"
                    placeholder="{{ 'blogs.comments.name' | t }}"
                    value="{{ form.author }}"
                    autocapitalize="words"
                  >
                </div>
                <div class="input-holder">
                  <label
                    for="CommentEmail"
                    class="label-hidden mb-1 inline-block"
                  >
                    {{ 'blogs.comments.email' | t }}
                  </label>
                  <input
                    type="email"
                    name="comment[email]"
                    id="CommentEmail"
                    class="{% if form.errors contains 'email' %}input-error{% endif %}"
                    placeholder="{{ 'blogs.comments.email' | t }}"
                    value="{{ form.email }}"
                    spellcheck="false"
                    autocomplete="off"
                    autocapitalize="off"
                  >
                </div>
              </div>
              <div class="input-holder">
                <label
                  for="CommentBody"
                  class="label-hidden mb-1 inline-block"
                >
                  {{ 'blogs.comments.message' | t }}
                </label>
                <textarea
                  name="comment[body]"
                  id="CommentBody"
                  class="{% if form.errors contains 'body' %}input-error{% endif %}"
                  placeholder="{{ 'blogs.comments.message' | t }}"
                >
                  {{- form.body -}}
                </textarea>
              </div>
              {% if blog.moderated? %}
                <p>{{ 'blogs.comments.moderated' | t }}</p>
              {% endif %}
              <input
                type="submit"
                class="button"
                value="{{ 'blogs.comments.post' | t }}"
              >
            {% endform %}
          {% endif %}
        </div>
      </div>
    </article>
  </div>
</div>

{% schema %}
{
  "name": "Article",
  "settings": [
    {
      "type": "checkbox",
      "id": "enable_lazyload",
      "label": "Enable lazyload",
      "default": true
    }
  ]
}
{% endschema %}
