<div class="filter-collapse relative lg:mr-5">
  <details-utils
    close-esc
    close-click-outside="(min-width: 1024px)"
    force-close="(min-width: 1024px)"
    force-restore
  >
    <details
      class="filter-collapse__item js-filter"
      data-index="mobile-{{ forloop.index }}"
    >
      <summary class="flex items-center justify-between py-3">
        {{ filter.label }}
        <span class="filter-collapse__btn mx-4 shrink-0 lg:ml-0"></span>
      </summary>

      <div class="filter-collapse__slide overflow-hidden">
        <div class="filter-collapse__heading body-small hidden lg:flex lg:items-center lg:justify-between lg:space-x-2 lg:p-4">
          <div class="facets__selected no-js-hidden">
            {{ 'products.facets.filters_selected' | t: count: filter.active_values.size }}
          </div>
          <div>
            <facet-remove>
              <a href="{{ filter.url_to_remove }}">{{ 'collections.filters.reset' | t }}</a>
            </facet-remove>
          </div>
        </div>

        <div class="filter-collapse__holder lg:px-4">
          {% for value in filter.values %}
            <div class="custom-input custom-input--square-with-text py-3">
              <input
                id="Filter-{{ value.param_name }}-{{ forloop.index }}"
                type="checkbox"
                name="{{ value.param_name }}"
                value="{{ value.value }}"
                {% if value.active -%}
                  checked
                {%- endif %}
                {% if value.count == 0 and value.active == false -%}
                  disabled
                {%- endif %}
              >
              <label
                for="Filter-{{ value.param_name }}-{{ forloop.index }}"
                class="custom-label flex items-center"
              >
                <span class="custom-label__check"></span>
                {{ value.label }} ({{ value.count }})
              </label>
            </div>
          {% endfor %}
        </div>
      </div>
    </details>
  </details-utils>
</div>
